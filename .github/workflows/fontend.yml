# ÄÆ°á»ng dáº«n: .github/workflows/deploy-frontend.yml

name: ğŸš€ Deploy Frontend (HTML TÄ©nh) to SomEE

on:
  push:
    branches:
      - main # Cháº¡y khi code Ä‘Æ°á»£c push lÃªn nhÃ¡nh 'main'
    paths:
      - 'frontend/**' # CHá»ˆ cháº¡y khi cÃ³ thay Ä‘á»•i trong thÆ° má»¥c 'frontend'

jobs:
  deploy:
    # SomEE cháº¡y trÃªn Windows/IIS, nhÆ°ng GitHub Actions Runner (ubuntu-latest)
    # Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ cháº¡y lá»‡nh triá»ƒn khai (scp/sftp) lÃªn SomEE.
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¦ Checkout code
        uses: actions/checkout@v4

      # Bá» qua: KHÃ”NG Cáº¦N Setup Node.js Environment
      # Bá» qua: KHÃ”NG Cáº¦N Install Dependencies & Build (VÃ¬ lÃ  HTML TÄ©nh)
      
      - name: ğŸ“¤ Deploy HTML Static via SFTP (Sá»­ dá»¥ng Host/User/Pass)
        # Sá»¬ Dá»¤NG: appleboy/scp-action lÃ  action Ä‘á»ƒ triá»ƒn khai qua SFTP/SCP.
        uses: appleboy/scp-action@v0.1.7 
        with:
          host: ${{ secrets.SOMEE_FE_HOST }}
          username: ${{ secrets.SOMEE_FE_USER }}
          password: ${{ secrets.SOMEE_FE_PASS }}
          port: 22 # Kiá»ƒm tra láº¡i cá»•ng SFTP/FTP chÃ­nh xÃ¡c cá»§a SomEE
          # Láº¥y Táº¤T Cáº¢ file/thÆ° má»¥c bÃªn trong thÆ° má»¥c 'frontend'
          source: frontend/* # QUAN TRá»ŒNG: Target lÃ  thÆ° má»¥c web root cá»§a báº¡n trÃªn SomEE
          # Target Ä‘Æ°á»£c Ä‘áº·t theo tÃªn miá»n cá»§a báº¡n nhÆ° trong File Manager
          target: "/www.quocMNM.somee.com" 
          
          # strip_components: 1 Ä‘áº£m báº£o chá»‰ ná»™i dung bÃªn trong 'frontend'  Ä‘Æ°á»£c upload, 
          # khÃ´ng táº¡o thÃªm thÆ° má»¥c 'frontend' trÃªn server.
          strip_components: 1 
          
      - name: âœ… Deployment Successful
        run: echo "Frontend HTML TÄ©nh Ä‘Ã£ Ä‘Æ°á»£c triá»ƒn khai thÃ nh cÃ´ng lÃªn SomEE!"
